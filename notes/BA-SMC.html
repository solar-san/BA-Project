<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="solar-san">

<title>Simulation and Monte Carlo Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="BA-SMC_files/libs/clipboard/clipboard.min.js"></script>
<script src="BA-SMC_files/libs/quarto-html/quarto.js"></script>
<script src="BA-SMC_files/libs/quarto-html/popper.min.js"></script>
<script src="BA-SMC_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="BA-SMC_files/libs/quarto-html/anchor.min.js"></script>
<link href="BA-SMC_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="BA-SMC_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="BA-SMC_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="BA-SMC_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="BA-SMC_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<link href="BA-SMC_files/libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="BA-SMC_files/libs/pagedtable-1.1/js/pagedtable.js"></script>
<meta name="author" content="solar-san">
<meta name="image" property="https://raw.githubusercontent.com/solar-san/BA-Project/main/docs/figures/BA-Project_header.png">
<meta name="description" content="Notes on simulation and Monte Carlo analysis for business analysts. It contains a self-contained introduction the topic, with R code snippets and the necessary mathematical and statistical notation.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&amp;family=Fira+Code&amp;display=swap" rel="stylesheet">

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-intro" id="toc-sec-intro" class="nav-link active" data-scroll-target="#sec-intro">Introduction</a></li>
  <li><a href="#decision-making-and-uncertainty" id="toc-decision-making-and-uncertainty" class="nav-link" data-scroll-target="#decision-making-and-uncertainty">Decision-making and Uncertainty</a>
  <ul class="collapse">
  <li><a href="#sec-profitex1" id="toc-sec-profitex1" class="nav-link" data-scroll-target="#sec-profitex1">Example: A Decision Model for Profit</a></li>
  </ul></li>
  <li><a href="#monte-carlo-methods" id="toc-monte-carlo-methods" class="nav-link" data-scroll-target="#monte-carlo-methods">Monte Carlo methods</a>
  <ul class="collapse">
  <li><a href="#using-past-information-distribution-fitting" id="toc-using-past-information-distribution-fitting" class="nav-link" data-scroll-target="#using-past-information-distribution-fitting">Using Past information: Distribution Fitting</a></li>
  <li><a href="#representing-variability-distribution-fitting" id="toc-representing-variability-distribution-fitting" class="nav-link" data-scroll-target="#representing-variability-distribution-fitting">Representing Variability: Distribution Fitting</a>
  <ul class="collapse">
  <li><a href="#the-normal-distribution" id="toc-the-normal-distribution" class="nav-link" data-scroll-target="#the-normal-distribution">The Normal Distribution</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Simulation and Monte Carlo Analysis</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>solar-san </p>
          </div>
  </div>
    
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">December 29, 2023</p>
    </div>
  </div>
    
  </div>
  

</header>

<p><img src="https://raw.githubusercontent.com/solar-san/BA-Project/main/docs/figures/BA-Project_header.png" class="img-fluid"></p>
<div class="cell">

</div>
<section id="sec-intro" class="level1">
<h1>Introduction</h1>
<blockquote class="blockquote">
<p>What is <em>Business Analytics</em>? It is an applied discipline, tasked with gaining insight into business operations and helping to make better, fact-based decisions: a basic pillar of being <em>data-driven</em>. It combines Statistics, Computer Sciences, Management Science, Operational Research, and much more.</p>
</blockquote>
<p>It has three main components:</p>
<ol type="1">
<li><strong>Descriptive analytics</strong>: providing insight into business questions by summarizing and visualizing observed data. Typically based on simple summaries and charts<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</li>
<li><strong>Predictive analytics</strong>: providing insight into the possible future by extrapolating patterns found in the historical data. Typically making use of statistical or machine learning predictive models (remember the Statistical Learning and Data Analytic courses).</li>
<li><strong>Prescriptive analytics</strong>: providing ways to make the best possible decisions based on the available information.</li>
</ol>
<blockquote class="blockquote">
<p>What is the role of Monte Carlo simulation in Business Analytics?</p>
</blockquote>
<p>The main reason for adoptin a simulation-based approach is <strong>uncertainty</strong>: it is what makes decision-making difficult, hence we need tools to <em>quantify</em> and <em>account for</em> uncertainty. Simulation-based approaches are a set of estimation methods used to quantify statistical uncertainty.</p>
<blockquote class="blockquote">
<p><em>Monte Carlo</em><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> <em>simulation</em> is a computer-based method to quantify, visualize, and assess uncertainty to evaluate its impact on decision-making. This class of methods is also known as <em>Risk Analysis</em> or <em>Static Simulation</em> models.</p>
</blockquote>
<p>While a closed-form solution is sometimes available for a large set of problems, provided that some quantities are known. This is often not the case. For example, <em>profits</em> are a function of <em>revenues</em> and <em>costs</em>: if the two latter quantites are known, then we can easily compute the <em>profits</em>; but revenues and costs are typically <em>not</em> known precisely, although it is possible to make some <em>probabilistic assessment</em> on the range of possible values.</p>
<p>The Monte Carlo simulation method is employed to evaluate the <em>properties of solutions</em> in scenarios where system inputs exhibit <em>stochastic</em> variations, proving crucial for <em>decision-making</em> and <em>risk analysis</em>. Additionally, it serves as a valuable tool for quantifying uncertainty in <em>estimation</em> procedures, particularly in situations where mathematical derivations, integrals, and optimization procedures may be intricate. This approach is also instrumental in exploring and validating the properties of statistical machine learning estimation procedures.</p>
</section>
<section id="decision-making-and-uncertainty" class="level1">
<h1>Decision-making and Uncertainty</h1>
<blockquote class="blockquote">
<p>Decision making is a fundamental and unavoidable aspect of business intelligence and analytics. Ideally, we wish decision to be logically sound and justifiable. Hence, a decision-making <em>procedure</em> or <em>model</em> is required.</p>
</blockquote>
<p>The following procedure is based on a simple princile: defining <em>clearly</em> the decision problem.</p>
<ol type="1">
<li>Translate the <em>decision</em> problem into a <em>conceptual</em> model.</li>
<li>Convert the <em>conceptual</em> model into a <em>mathematical</em> model that can be handled using mathematical reasoning.</li>
<li>Once the mathematical model is defined we can use it to assess whether the outcome is <em>robust</em> to changes in the assumptions.</li>
</ol>
<section id="sec-profitex1" class="level2">
<h2 class="anchored" data-anchor-id="sec-profitex1">Example: A Decision Model for Profit</h2>
<blockquote class="blockquote">
<p>This model is tasked with computing the profit of a small company.</p>
</blockquote>
<p>The simplest function that computes profits is <code>Profit = revenue - cost</code>. We can expand this mapping by considering that:</p>
<ul>
<li><em>Revenues</em> depend on the quantity that is sold and on the unit price.</li>
<li><em>Costs</em> depend on the quantity that is produced, on the unit cost and on the fixed costs.</li>
</ul>
<p>These considerations lead to the following model:</p>
<p><span id="eq-profitmodel"><span class="math display">
\mathrm{Profit} = p \times min\{D, Q\} - (F + cQ)
\tag{1}</span></span></p>
<ul>
<li><span class="math inline">p</span> is the <em>unit price</em>.</li>
<li><span class="math inline">Q</span> is the <em>quantity produced</em>.</li>
<li><span class="math inline">F</span> is the <em>fixed cost</em>.</li>
<li><span class="math inline">c</span> is the <em>unit cost</em>.</li>
<li><span class="math inline">D</span> is the <em>demand</em><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</li>
</ul>
<p>Profit is therefore a function of the inputs: <span class="math inline">\mathrm{Profit} = f(p, c, D, Q, F)</span>. This model can be easily automated with a spreadsheet or a script, to analyse different scenario and compute the estimated profits.</p>
</section>
</section>
<section id="monte-carlo-methods" class="level1">
<h1>Monte Carlo methods</h1>
<blockquote class="blockquote">
<p>In many cases we are <em>uncertain</em> about some of the inputs in our calculations, altough we can assume that the input will follow a given distribution of values. This assumptions can be modeled mathematically using <em>stochastic variables</em>, instead of deterministic inputs and outputs.</p>
</blockquote>
<p>How does this work in general?</p>
<p>We can assume that we have an <em>indipendently and identically distributed</em> sample <span class="math inline">(X_1, …, X_r)</span> with a <em>known distribution</em>. What we wish to compute is <span class="math inline">\mathbb{E}[g(X_1, …, X_r)]</span>, the expected value of a function of our set of stochastic variables.</p>
<p>We can build a new variable <span class="math inline">Y = g((X_1, …, X_r)</span>, such that <span class="math inline">\mu = \mathbb{E}[Y]</span>: for the <em>Law of Large Numbers</em>, we know that the sample mean of a sample of <span class="math inline">n</span> <span class="math inline">iid</span> random variables <em>converges to</em> <span class="math inline">\mu</span> for <span class="math inline">n \to \infty</span>.</p>
<p>In the example from <a href="#sec-profitex1">Section&nbsp;2.1</a>, we have:</p>
<p><span id="eq-profitstochastic"><span class="math display">
Y = g(c, p, D, Q, F) = p \times min \{D, Q\} - (F + cQ)
\tag{2}</span></span></p>
<p>If we repeatedly sample <span class="math inline">c</span>, which is our <span class="math inline">X_1</span> for this particular model, we can derive a distribution of <span class="math inline">\mathrm{Profit}</span> and determine its mean under the uncertain condition of varying unit cost prices. Moreover, we can get other descriptive statistics to get a sense of the variability and other aspects of the resulting distribution<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</p>
<section id="using-past-information-distribution-fitting" class="level2">
<h2 class="anchored" data-anchor-id="using-past-information-distribution-fitting">Using Past information: Distribution Fitting</h2>
<blockquote class="blockquote">
<p>Not necessarily we have to assume a distribution for <span class="math inline">X_1, …, X_r</span>: we might have <em>past information</em> on at least one input variable.</p>
</blockquote>
<p>Provided that this information is <em>reliable</em> and <em>relevant</em>, we should use it:</p>
<ol type="1">
<li>We can sample from the past observation, if they cover all possible ranges.</li>
<li>We can <em>fit a distribution</em> to the past observation and sample from the fitted distribution.</li>
</ol>
<p>The second option uses the <em>method of moment estimation</em> (MME), which is easy to implement, has a low computational cost, and yields estimates that are <em>consistent</em><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>. It is also called <em>moment matchin estimation</em> because it aims to match the distribution and sample mean and variance<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>.</p>
<p>The variability can be represented by choosing a distribution: for example, if <span class="math inline">c \sim N(\mu, \sigma^2)</span>, then <span class="math inline">\mathbb{E}[c] = \mu</span> and <span class="math inline">\mathbb{V}(c) = \sigma^2</span>.</p>
<p>The sample version of mean and variance are:</p>
<p><span class="math display">
\bar{y} = \frac{1}{n} \sum_{i = 1}^n y_i \qquad
\mathrm{and} \qquad s^2 = \frac{1}{n} \sum_{i = 1}^n(y_i - \bar{y})^2
</span></p>
<p>We will use this well-known formula to estimate <span class="math inline">\hat \mu</span> and <span class="math inline">\hat \sigma</span>.</p>
</section>
<section id="representing-variability-distribution-fitting" class="level2">
<h2 class="anchored" data-anchor-id="representing-variability-distribution-fitting">Representing Variability: Distribution Fitting</h2>
<blockquote class="blockquote">
<p>The estimated distribution can be used as the parent distribution from which we can generate sample values.</p>
</blockquote>
<p>We can use several different distributions; in general, distributions are characterized by one or more parameter <span class="math inline">\theta</span>.</p>
<p>Certain distributions are prevalent and well-suited for describing specific phenomena in various sub-fields. The following paragraphs contain a selection of common and uncommon probability distributions that can be used to represent the uncertainty associated to the input of a Monte Carlo simulation.</p>
<div class="callout-caution callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Danger
</div>
</div>
<div class="callout-body-container callout-body">
<p>When selecting a distribution for a Monte Carlo experiment, the shape and range of potential values must be carefully considered. Transforming vague information and expert knowledge into a usable distribution function for Monte Carlo experiments is a complex task, constituting an active area of research.</p>
</div>
</div>
<section id="the-normal-distribution" class="level3">
<h3 class="anchored" data-anchor-id="the-normal-distribution">The Normal Distribution</h3>
<p>The normal distribution is just one of many distributions one can use to represent variability for a input in a Monte Carlo experiment. Its main advantages is that it is fully parametrized by a <em>location</em> and a <em>scale</em> parameters, <span class="math inline">\mu</span> and <span class="math inline">\sigma</span>.</p>
</section>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Any predictive or prescriptive model is based on some steps of <em>descriptive analytics</em>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>The term <em>Monte Carlo</em> refers to a range of methods in which <em>statistical sampling</em> is employed to approximate solutions to quantitative problems; the name Monte Carlo is related to the Monte Carlo <em>casino</em> in Monaco where randomness is king.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>While the demand might be higher than the quantity produced, the company might sell only up to the latter.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Beware that the choice of the functiong <span class="math inline">g()</span> and the joint/marginal distributions of <span class="math inline">X_1, …, X_r</span> is <em>fundamental</em> in determining the result and <em>should</em> always be based on justifiable assumptions.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>They converge to the value of the parameter they are designed to estimate for <span class="math inline">n \to \infty</span>.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>The so-called first and second <em>moments</em> of a distribution.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>